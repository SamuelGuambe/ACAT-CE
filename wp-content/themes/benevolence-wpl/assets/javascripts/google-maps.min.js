!function(a){function e(t,o){var e;return this.$T=a(t),this.options=a.extend(!0,{latitude:null,longitude:null,zoom:15,marker:{image:null,width:null,height:null},styles:null,snazzymaps:null},o,{latitude:this.$T.data("latitude"),longitude:this.$T.data("longitude"),zoom:this.$T.data("zoom"),marker:{image:this.$T.data("marker-image"),width:this.$T.data("marker-width"),height:this.$T.data("marker-height")},saturation:this.$T.data("saturation"),lightness:this.$T.data("lightness"),hue:this.$T.data("hue")}),0<this.$T.parent().find("#wplook-google-map-template").length&&("object"==typeof(e=JSON.parse(this.$T.parent().find("#wplook-google-map-template").html()))&&(this.options.snazzymaps=e)),this.map=null,this._init(t,o),this}var i="wplGoogleMaps";e.prototype._init=function(t,o){this._generateMap(t)},e.prototype._generateMap=function(t){var i=this;t.each(function(t,o){return i.options.latitude||i.options.longitude?(e=i.options.saturation||i.options.lightness||i.options.hue?[{featureType:"all",stylers:[{saturation:parseFloat(i.options.saturation)},{lightness:parseFloat(i.options.lightness)},{hue:i.options.hue}]}]:i.options.styles||i.options.snazzymaps||!1,i.map=new google.maps.Map(a(o)[0],{center:{lat:parseFloat(i.options.latitude),lng:parseFloat(i.options.longitude)},zoom:parseFloat(i.options.zoom),disableDefaultUI:!0,scrollwheel:!1,styles:e}),i.options.marker.image?(!i.options.marker.width||!i.options.marker.height||i.options.marker.width==i.options.marker.height||32==i.options.marker.width&&32==i.options.marker.height?(i.options.marker.width=32,i.options.marker.height=32):(e=Math.min(32/i.options.marker.width,32/i.options.marker.height),i.options.marker.width=Math.round(i.options.marker.width*e),i.options.marker.height=Math.round(i.options.marker.height*e)),new google.maps.Marker({position:{lat:parseFloat(i.options.latitude),lng:parseFloat(i.options.longitude)},icon:{url:i.options.marker.image,scaledSize:new google.maps.Size(i.options.marker.width,i.options.marker.height)},map:i.map})):new google.maps.Marker({position:{lat:parseFloat(i.options.latitude),lng:parseFloat(i.options.longitude)},map:i.map}),this.$T):(console.error("No coordinates provided for map. Map could not be generated."),!1);var e})},e.prototype.resize=function(){google.maps.event.trigger(this.map,"resize")},a.fn[i]=function(t){if(!a(this).length)return a(this);var o=a(this).data(i);return o&&"string"==typeof t&&0!=t.indexOf("_")&&o[t]&&"function"==typeof o[t]?o[t](Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void(o?0==t.indexOf("_")?a.error("Method "+t+" is private!"):a.error("Method "+t+" does not exist."):a.error("Plugin must be initialised before using method: "+t)):(o=new e(a(this),t),a(this).data(i,o),a(this))}}(jQuery);